cluster:
  name: default
  id: 0

ipv4:
  enabled: true
ipv6:
  enabled: false

commonLabels: 
  app.kubernetes.io/version: v1.18.3

# force clean state
# cleanState: true

k8sServiceHost: 192.168.4.2
k8sServicePort: 6443

# nodes routing
routingMode: "native"
autoDirectNodeRoutes: true
directRoutingSkipUnreachable: false
# loadbalancer:
#   mode: dsr
#   acceleration: native
ipv4NativeRoutingCIDR: 10.100.0.0/16
ipv6NativeRoutingCIDR: 2a02:ed02:a201:4e00:d1ce::0/112
enableIPv6Masquerade: false
devices: wlan0

kubeProxyReplacement: true
bpf:
  masquerade: true
  datapathMode: "netkit"
  distributedLRU:
    enabled: false
bpfClockProbe: true
ciliumEndpointSlice:
  enabled: true
annotateK8sNode: true
rollOutCiliumPods: true

bandwidthManager:
  enabled: false
l2announcements:
  enabled: false
l2podAnnouncements:
  enabled: false
nodeIPAM:
  enabled: false

ipam:
  mode: "cluster-pool"
  operator:
    clusterPoolIPv4PodCIDRList:
      - 10.100.0.0/16
    # clusterPoolIPv6PodCIDRList:
    #   - 2a02:ed02:a201:4e00:d1ce::0/112
    clusterPoolIPv4MaskSize: 24
    clusterPoolIPv6MaskSize: 120

gatewayAPI:
  enabled: true
  enableAppProtocol: true
  enableAlpn: true
  hostNetwork:
    enabled: true
    nodes:
      matchLabels:
        node.io/role: core

tls:
  readSecretsOnlyFromSecretsNamespace: true
  caBundle:
    useSecret: true

  secretSync:
    enabled: true

authentication:
  enabled: true
#   mutual:
#     spire:
#       enabled: true
#       install:
#         enabled: true

encryption:
  enabled: true
  type: "wireguard"
  nodeEncryption: false

resources:
  limits:
    cpu: 500m
    memory: 256Mi
  requests:
    cpu: 30m
    memory: 128Mi

operator:
  replicas: 1
  resources:
    limits:
      cpu: 50m
      memory: 64Mi
    requests:
      cpu: 10m
      memory: 64Mi
  prometheus:
    enabled: false
    serviceMonitor:
      enabled: false

envoy:
  enabled: true
  log:
    format: null
    format_json:
      date: "%Y-%m-%dT%T.%e"
      thread_id: "%t"
      source_line: "%s:%#"
      level: "%l"
      logger: "%n"
      message: "%j"
  prometheus:
    enabled: true
    serviceMonitor:
      enabled: false
  resources:
    limits:
      cpu: 300m
      memory: 64Mi
    requests:
      cpu: 20m
      memory: 32Mi
  securityContext:
    capabilities:
      keepCapNetBindService: true
      envoy:
      - NET_BIND_SERVICE
      - NET_ADMIN
      - SYS_ADMIN

hubble:
  enabled: false
  relay:
    enabled: false
    resources: {}
  ui:
    enabled: false
    tls:
      client:
        existingSecret: ""
    backend:
      resources: {}
    frontend:
      resources: {}
  tls:
    auto:
      method: certmanager
      certValidityDuration: 90
      certManagerIssuerRef:
        name: cluster-private
        group: cert-manager.io
        kind: ClusterIssuer

enableLBIPAM: false
certgen:
  generateCA: false
sysctlfix:
  enabled: false

cgroup:
  autoMount:
    resources:
      limits:
        cpu: 100m
        memory: 128Mi
      requests:
        cpu: 100m
        memory: 128Mi
